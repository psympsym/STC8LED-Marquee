C51 COMPILER V9.60.0.0   NIXIETUBE                                                         05/14/2023 17:39:57 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE NIXIETUBE
OBJECT MODULE PLACED IN .\Objects\NixieTube.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE User\src\NixieTube.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Li
                    -stings\NixieTube.lst) OBJECT(.\Objects\NixieTube.obj)

line level    source

   1          /* ---------------------------------- 包含头文件 --------------------------------- */
   2          #include "..\inc\STC8Ax_REG.h"
   3          #include "..\inc\Definition.h"
   4          
   5          #include "..\Main.h"
   6          #include "..\inc\LEDChange.h"
   7          
   8          /* ---------------------------------- 扩展变量 ---------------------------------- */
   9          uint16 LEDChangeTime = 300; // LED变化时间ms
  10          
  11          /* ---------------------------------- 私有变量 ---------------------------------- */
  12          uint8 digit_seg_en = 0; // 数码管位选
  13          uint8 speed_second = 0;
  14          uint8 speed_first = 0;
  15          
  16          /* ----------------------------------- 函数 ---------------------------------- */
  17          void NixieTube()
  18          {
  19   1          speed_second = LEDChangeTime / 100;     // 取速度第二位
  20   1          speed_first =  LEDChangeTime / 10 % 10; // 取速度第一位
  21   1      
  22   1          digit_seg_en++;
  23   1          if (digit_seg_en > 4)
  24   1          {
  25   2              digit_seg_en = 1;
  26   2          }
  27   1      
  28   1          switch (digit_seg_en)
  29   1          {
  30   2              case 1: // 第一位数码管显示
  31   2                  DigShow_COM = 0xF7;
  32   2                  if (TR0 == 1) // 跑马灯开启
  33   2                  {
  34   3                      if (direction_flag == 1) // 方向正显示n
  35   3                      {
  36   4                          DigShow_PORT = DigDisplay_table[11];
  37   4                      }
  38   3                      else                     // 方向负显示u
  39   3                      {
  40   4                          DigShow_PORT = DigDisplay_table[10];
  41   4                      }
  42   3                  }
  43   2                  else if (TR0 == 0) // 跑马灯暂停 显示o
  44   2                  {
  45   3                      DigShow_PORT = DigDisplay_table[14]; 
  46   3                  }
  47   2                  break;
  48   2              case 2: // 第二位数码管显示
  49   2                  DigShow_COM = 0xFB;
  50   2                  if (TR0 == 1) // 跑马灯开启 显示-
  51   2                  {
  52   3                      DigShow_PORT = DigDisplay_table[13];
  53   3                  }
  54   2                  else if (TR0 == 0) // 跑马灯暂停 显示F
C51 COMPILER V9.60.0.0   NIXIETUBE                                                         05/14/2023 17:39:57 PAGE 2   

  55   2                  {
  56   3                      DigShow_PORT = DigDisplay_table[15];
  57   3                  }
  58   2                  break;
  59   2              case 3: // 第三位数码管显示
  60   2                  DigShow_COM = 0xFD;
  61   2                  if (TR0 == 1)
  62   2                  {
  63   3                      DigShow_PORT = DigDisplay_table[speed_second];
  64   3                  }
  65   2                  else if (TR0 == 0) // 跑马灯暂停 关闭数码管
  66   2                  {
  67   3                      DigShow_PORT = DigDisplay_table[12];
  68   3                  }
  69   2                  break;
  70   2              case 4: // 第四位数码管显示
  71   2                  DigShow_COM = 0xFE;
  72   2                  if (TR0 == 1)
  73   2                  {
  74   3                      DigShow_PORT = DigDisplay_table[speed_first];
  75   3                  }
  76   2                  else if (TR0 == 0) // 跑马灯暂停 关闭数码管
  77   2                  {
  78   3                      DigShow_PORT = DigDisplay_table[12];
  79   3                  }
  80   2                  break;
  81   2              default:
  82   2                  break;
  83   2          }
  84   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    164    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
